<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>TouristGopher</title>
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://bootswatch.com/cosmo/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
  </head>
  <body>
<!-- nav -->

<nav class="navbar navbar-fixed-top navbar-inverse">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
    <a class="navbar-brand" href="#">
      <img style="height: 26px; width:26px;" src="/images/gopher.png">
    </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">TouristGopher</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home <span class="sr-only">(current)</span></a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Categories <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Restaurants</a></li>
            <li><a href="#">Bars</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Nightlife</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Montmartre, Lyon...">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Contact <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Email</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="https://twitter.com/gustav__rod">Twitter</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>



<!-- end nav -->
<div class="container-fluid" id="main">
  <div class="row">
    <div class="col-md-8 col-xs-12" id="left">
    
      <h2>TouristGopher</h2>
      <p>Search results for <em> Montmartre </em></p>
      <!-- item list -->
      <!-- item -->
      {{range $i, $a := .Places }}
      <div class="col-md-6 col-xs-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <span style="font-weight: bolder;color: green; font-size:20px;"><em>{{ .Rating }}</em></span> 
            <a href="">{{ .Name }}</a>
            <span style="font-size:20px;float:right;"><span style="color:red; font-weight: bolder">{{ .Number_of_Ratings }}</span> Ratings</span>
          </div>
        </div>
      </div>
      {{ end }}
      <!-- End item -->
      <p>
      <a href="http://github.com/octohedron/touristgopher">Source Code</a>
      </p>
      
      <hr> 
        
      <p>
      <a href="#" target="_ext" class="center-block btn btn-primary">Load more results</a>
      </p>
        
      <hr>      

    </div>
    <div class="col-md-4 col-xs-12">
      <div class="iframe-container">
        <div id="map_container"></div>
        <div id="map"></div>
      </div>
</div>
    
  </div>
</div>
<!-- end template -->
<script type="text/javascript">


$(document).ready(function() {
var map, infoWindow;
/* google maps -----------------------------------------------------*/
google.maps.event.addDomListener(window, 'load', initialize);

function initialize() {

  /* position Amsterdam */
  var latlng = new google.maps.LatLng(48.857031, 2.341719);

  var mapOptions = {
    center: latlng,
    zoom: 15
  };
  
  // Initialize map
  map = new google.maps.Map(document.getElementById("map"), mapOptions);

  // Print places
  {{range $i, $a := .Places}}
    let {{ toJS .Identifier }} = {lat: parseFloat('{{ .Location }}'.split(",")[0]), lng: parseFloat('{{ .Location }}'.split(",")[1])};
    var {{toJS  .MarkerVar -}} = new google.maps.Marker({
      position: {{ toJS  .Identifier }},
      map: map,
      label: '{{ .Name }}',
      animation: google.maps.Animation.DROP
    });
    {{ toJS .MarkerVar -}}.setMap(map);
  {{end}}

  }; // end initialize
  
  google.maps.event.addDomListener(window, "resize", function() {
    var center = map.getCenter();
    google.maps.event.trigger(map, "resize");
    map.setCenter(center);
  });
  
/* end google maps -----------------------------------------------------*/
});

</script>
  <!-- script references -->
    
    <script src="js/bootstrap.min.js"></script>
    <script src="js/scripts.js"></script>
    <script src="http://maps.googleapis.com/maps/api/js?key={{- toJS .GMAPS_KEY -}}&extension=.js&output=embed"></script>
  </body>
</html>